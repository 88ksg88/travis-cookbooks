language: generic

sudo: false

env:
  global:
  - PATH="/opt/chef/bin:$PATH"
  matrix:
  - COOKBOOK_PATH="cookbooks"
  - COOKBOOK_PATH="community-cookbooks"

addons:
  apt:
    sources:
    - chef-stable-precise
    packages:
    - chefdk

install:
- rvm use 2.1.7 --install --binary --fuzzy
- gem install rubocop

script:
- "if [[ -f $COOKBOOK_PATH/.rubocop.yml ]] ; then (cd $COOKBOOK_PATH && rubocop) ; fi"
- "./run-foodcritic $COOKBOOK_PATH"
